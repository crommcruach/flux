<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controls - Flux</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <link href="css/controls.css" rel="stylesheet">
</head>
<body>
    <script src="js/menu-loader.js"></script>
    
    <div class="app-layout">
        <!-- Global Playlist Controls -->
        <div class="playlist-management-bar">
            <div class="playlist-management-bar-title">
                <span>üìã Playlist Management</span>
            </div>
            <div class="playlist-management-bar-actions">
                <button class="btn btn-success btn-sm" onclick="savePlaylists()" title="Save Both Playlists">üíæ Save Playlists</button>
                <button class="btn btn-info btn-sm" onclick="loadPlaylists()" title="Load Both Playlists">üìÇ Load Playlists</button>
            </div>
        </div>
        
        <!-- Video Player Section -->
        <div class="player-section">
            <!-- Preview -->
            <div class="preview-box">
                <div class="preview-video" id="videoPreview" onclick="openVideoFullscreen()" title="Click to open fullscreen">
                    <img src="" alt="Video Preview" id="videoPreviewImg">
                </div>
                <div class="player-controls">
                    <button class="btn btn-secondary btn-sm" onclick="previousVideo()" title="Previous Video">‚èÆÔ∏è</button>
                    <button class="btn btn-success btn-sm" onclick="playVideo()" title="Play / Restart">‚ñ∂Ô∏è</button>
                    <button class="btn btn-warning btn-sm" onclick="pauseVideo()">‚è∏Ô∏è</button>
                    <button class="btn btn-danger btn-sm" onclick="stopVideo()">‚èπÔ∏è</button>
                    <button class="btn btn-secondary btn-sm" onclick="nextVideo()" title="Next Video">‚è≠Ô∏è</button>
                    <button class="btn btn-outline-primary btn-sm" id="videoAutoplayBtn" onclick="toggleVideoAutoplay()" title="Autoplay">üîÅ</button>
                    <button class="btn btn-outline-primary btn-sm" id="videoLoopBtn" onclick="toggleVideoLoop()" title="Loop Playlist">üîÇ</button>
                </div>
            </div>
            
            <!-- Transition Menu -->
            <div class="transition-menu">
                <button class="transition-toggle" onclick="toggleTransitionMenu('video')" title="Transition Settings">
                    <span class="transition-icon">‚ö°</span>
                </button>
                <div class="transition-panel" id="videoTransitionPanel">
                    <div class="transition-header">
                        <span>‚ö° Transitions</span>
                        <button class="btn-close-transition" onclick="closeTransitionMenu('video')">√ó</button>
                    </div>
                    <div class="transition-body">
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" id="videoTransitionEnabled" onchange="toggleTransitions('video', this.checked)">
                            <label class="form-check-label" for="videoTransitionEnabled">Enable Transitions</label>
                        </div>
                        
                        <div class="transition-settings" id="videoTransitionSettings">
                            <div class="form-group mb-3">
                                <label class="form-label">Effect:</label>
                                <select class="form-select form-select-sm" id="videoTransitionEffect" onchange="updateTransition('video')">
                                    <option value="fade">Fade</option>
                                    <option value="wipe_left">Wipe Left</option>
                                    <option value="wipe_right">Wipe Right</option>
                                    <option value="wipe_top">Wipe Top</option>
                                    <option value="wipe_bottom">Wipe Bottom</option>
                                    <option value="dissolve">Dissolve</option>
                                    <option value="push">Push</option>
                                    <option value="zoom">Zoom</option>
                                </select>
                            </div>
                            
                            <div class="form-group mb-3">
                                <label class="form-label">Duration: <span id="videoDurationValue">1.0s</span></label>
                                <input type="range" class="form-range" id="videoTransitionDuration" 
                                       min="0.1" max="5.0" step="0.1" value="1.0"
                                       oninput="updateTransition('video')">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Easing:</label>
                                <select class="form-select form-select-sm" id="videoTransitionEasing" onchange="updateTransition('video')">
                                    <option value="linear">Linear</option>
                                    <option value="ease_in_out" selected>Ease In-Out</option>
                                    <option value="ease_out">Ease Out</option>
                                    <option value="ease_in">Ease In</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Playlist -->
            <div class="playlist-area">
                <div class="playlist-header">
                    <span>üìπ Video Playlist</span>
                </div>
                <div class="playlist-scroll" id="videoPlaylist">
                    <div class="empty-state">
                        <div class="empty-state-icon">üìÇ</div>
                        <p>No videos loaded</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Art-Net Player Section -->
        <div class="player-section">
            <!-- Preview -->
            <div class="preview-box">
                <div class="preview-video" id="artnetPreview">
                    <img src="" alt="Art-Net Preview" id="artnetPreviewImg">
                </div>
                <div class="player-controls">
                    <button class="btn btn-secondary btn-sm" onclick="previousArtnet()" title="Previous Video">‚èÆÔ∏è</button>
                    <button class="btn btn-success btn-sm" onclick="playArtnet()" title="Play / Restart">‚ñ∂Ô∏è</button>
                    <button class="btn btn-warning btn-sm" onclick="pauseArtnet()">‚è∏Ô∏è</button>
                    <button class="btn btn-danger btn-sm" onclick="stopArtnet()">‚èπÔ∏è</button>
                    <button class="btn btn-secondary btn-sm" onclick="nextArtnet()" title="Next Video">‚è≠Ô∏è</button>
                    <button class="btn btn-outline-primary btn-sm" id="artnetAutoplayBtn" onclick="toggleArtnetAutoplay()" title="Autoplay">üîÅ</button>
                    <button class="btn btn-outline-primary btn-sm" id="artnetLoopBtn" onclick="toggleArtnetLoop()" title="Loop Playlist">üîÇ</button>
                </div>
            </div>
            
            <!-- Transition Menu -->
            <div class="transition-menu">
                <button class="transition-toggle" onclick="toggleTransitionMenu('artnet')" title="Transition Settings">
                    <span class="transition-icon">‚ö°</span>
                </button>
                <div class="transition-panel" id="artnetTransitionPanel">
                    <div class="transition-header">
                        <span>‚ö° Transitions</span>
                        <button class="btn-close-transition" onclick="closeTransitionMenu('artnet')">√ó</button>
                    </div>
                    <div class="transition-body">
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" id="artnetTransitionEnabled" onchange="toggleTransitions('artnet', this.checked)">
                            <label class="form-check-label" for="artnetTransitionEnabled">Enable Transitions</label>
                        </div>
                        
                        <div class="transition-settings" id="artnetTransitionSettings">
                            <div class="form-group mb-3">
                                <label class="form-label">Effect:</label>
                                <select class="form-select form-select-sm" id="artnetTransitionEffect" onchange="updateTransition('artnet')">
                                    <option value="fade">Fade</option>
                                    <option value="wipe_left">Wipe Left</option>
                                    <option value="wipe_right">Wipe Right</option>
                                    <option value="wipe_top">Wipe Top</option>
                                    <option value="wipe_bottom">Wipe Bottom</option>
                                    <option value="dissolve">Dissolve</option>
                                    <option value="push">Push</option>
                                    <option value="zoom">Zoom</option>
                                </select>
                            </div>
                            
                            <div class="form-group mb-3">
                                <label class="form-label">Duration: <span id="artnetDurationValue">1.0s</span></label>
                                <input type="range" class="form-range" id="artnetTransitionDuration" 
                                       min="0.1" max="5.0" step="0.1" value="1.0"
                                       oninput="updateTransition('artnet')">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Easing:</label>
                                <select class="form-select form-select-sm" id="artnetTransitionEasing" onchange="updateTransition('artnet')">
                                    <option value="linear">Linear</option>
                                    <option value="ease_in_out" selected>Ease In-Out</option>
                                    <option value="ease_out">Ease Out</option>
                                    <option value="ease_in">Ease In</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Playlist -->
            <div class="playlist-area">
                <div class="playlist-header">
                    <span>üí° Art-Net Playlist</span>
                </div>
                <div class="playlist-scroll" id="artnetPlaylist">
                    <div class="empty-state">
                        <div class="empty-state-icon">üìÇ</div>
                        <p>No Art-Net sources loaded</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Section: Tabs + FX Controls -->
        <div class="bottom-section">
            <!-- Left Tabs Panel -->
            <div class="tabs-panel">
                <div class="tabs-header">
                    <button class="tab-btn active" onclick="switchTab('effects')">Effects</button>
                    <button class="tab-btn" onclick="switchTab('sources')">Sources</button>
                    <button class="tab-btn" onclick="switchTab('files')">Files</button>
                </div>
                <div class="tab-content">
                    <!-- Effects Tab -->
                    <div class="tab-pane active" id="tab-effects">
                        <h6>Available Effects</h6>
                        <div id="availableEffects">
                            <div class="empty-state">
                                <div class="spinner-border text-primary" role="status"></div>
                                <p class="mt-2">Loading...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sources Tab -->
                    <div class="tab-pane" id="tab-sources">
                        <h6>Available Sources</h6>
                        <div id="availableSources">
                            <div class="empty-state">
                                <p>Coming soon...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Files Tab -->
                    <div class="tab-pane" id="tab-files">
                        <h6>File Browser</h6>
                        <div id="fileBrowser">
                            <div class="empty-state">
                                <p>Coming soon...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Video FX Control -->
            <div class="fx-panel">
                <div class="fx-panel-header">
                    <span>üé¨ Video FX</span>
                    <button class="btn btn-sm btn-danger btn-icon" onclick="clearVideoEffects()">üóëÔ∏è</button>
                </div>
                <div class="fx-panel-body" id="videoFxList">
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ú®</div>
                        <h6>No Effects</h6>
                        <p>Add effects from the left panel</p>
                    </div>
                </div>
            </div>
            
            <!-- Art-Net FX Control -->
            <div class="fx-panel">
                <div class="fx-panel-header">
                    <span>üí° Art-Net FX</span>
                    <button class="btn btn-sm btn-danger btn-icon" onclick="clearArtnetEffects()">üóëÔ∏è</button>
                </div>
                <div class="fx-panel-body" id="artnetFxList">
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ú®</div>
                        <h6>No Effects</h6>
                        <p>Add effects from the left panel</p>
                    </div>
                </div>
            </div>
            
            <!-- Clip FX Control (Unified for both players) -->
            <div class="fx-panel">
                <div class="fx-panel-header">
                    <span id="clipFxTitle">üé¨ Clip FX</span>
                    <button class="btn btn-sm btn-danger btn-icon" onclick="clearClipEffects()">üóëÔ∏è</button>
                </div>
                <div class="fx-panel-body" id="clipFxList">
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ú®</div>
                        <h6>No Clip Effects</h6>
                        <p>Select a clip to manage effects</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Playlist Load Modal -->
    <div class="modal fade" id="playlistModal" tabindex="-1" aria-labelledby="playlistModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="playlistModalLabel">üìÇ Load Playlists</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="playlistModalBody">
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/controls.js" type="module"></script>
</body>
</html>