<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flux - Video Art-Net Controller</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>

<body>
  <!-- ========================================
       HTML STRUCTURE [Lines 171-245]
       ======================================== -->

  <!-- Top Menu Bar -->
  <div class="menu-bar">
    <!-- Project Controls -->
    <div class="menu-section">
      <input type="text" id="projectName" class="form-control form-control-sm" placeholder="Projektname" value="Mein Projekt" style="width: 150px;">
      <button class="btn btn-success btn-sm menu-btn" onclick="saveProjectToServer()" title="Auf Server speichern">ğŸ’¾</button>
      <button class="btn btn-success btn-sm menu-btn" onclick="saveProject()" title="Lokal herunterladen">â¬‡ï¸</button>
      <button class="btn btn-info btn-sm menu-btn" onclick="showProjectManager()" title="Projekte verwalten">ğŸ“‚</button>
      <input type="file" id="projectFileInput" class="form-control form-control-sm" accept=".json" style="display: none;">
      <button class="btn btn-info btn-sm menu-btn" onclick="document.getElementById('projectFileInput').click()" title="Lokale Datei laden">â¬†ï¸</button>
      <button class="btn btn-warning btn-sm menu-btn ms-2" onclick="exportPoints()" title="Punkte exportieren">ğŸ“¤</button>
    </div>

    <!-- Background Image -->
    <div class="menu-section">
      <label>Hintergrund:</label>
      <input type="file" id="bgImageInput" class="form-control form-control-sm" accept="image/*" style="width: 180px;">
      <button class="btn btn-secondary btn-sm menu-btn" onclick="clearBackgroundImage()" title="Bild entfernen">ğŸ—‘ï¸</button>
    </div>

    <!-- Canvas Size -->
    <div class="menu-section">
      <label>Canvas:</label>
      <select id="canvasSize" class="form-select form-select-sm" style="width: 140px;">
        <option value="1024x768">1024 Ã— 768</option>
        <option value="1280x720">1280 Ã— 720</option>
        <option value="1920x1080">1920 Ã— 1080</option>
        <option value="2560x1440">2560 Ã— 1440</option>
        <option value="3840x2160">3840 Ã— 2160</option>
        <option value="custom">Benutzerdefiniert...</option>
      </select>
      <input type="number" id="customWidth" class="form-control form-control-sm" placeholder="Breite" 
        style="width: 80px; display: none;" min="100" max="10000">
      <input type="number" id="customHeight" class="form-control form-control-sm" placeholder="HÃ¶he" 
        style="width: 80px; display: none;" min="100" max="10000">
      <button id="customApply" class="btn btn-primary btn-sm menu-btn" style="display: none;" 
        onclick="applyCustomCanvasSize()">âœ“</button>

    </div>

    <!-- Theme Toggle & Controls Link (right side) -->
    <div class="menu-section right">
      <a href="/controls" class="btn btn-primary btn-sm menu-btn" style="text-decoration: none;" title="Controls">ğŸ›ï¸</a>
      <a href="/config" class="btn btn-secondary btn-sm menu-btn" style="text-decoration: none;" title="Config">âš™ï¸</a>
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="themeToggle">
        <label class="form-check-label" for="themeToggle" id="themeLabel">Hell</label>
      </div>
    </div>
  </div>

  <div class="app-container">
    <!-- Toolbar (links) -->
    <div class="toolbar">
      <!-- Logo Header -->
      <div class="text-center mb-3">
        <img src="/static/logo.svg" alt="Flux Logo" style="width: 100px; height: 100px;">
        <h5 class="mt-2 mb-0" style="font-weight: 600;">Flux</h5>
        <small style="opacity: 0.7;">Shape Editor</small>
      </div>
      <div class="toolbar-section">
        <label class="form-label">Formen</label>
        <div class="shape-grid">
          <button class="btn btn-primary btn-shape btn-sm" onclick="addShape('rect')" title="Quadrat">ğŸ“¦</button>
          <button class="btn btn-primary btn-shape btn-sm" onclick="addShape('circle')" title="Kreis">â­•</button>
          <button class="btn btn-primary btn-shape btn-sm" onclick="addShape('triangle')" title="Dreieck">â–³</button>
          <button class="btn btn-primary btn-shape btn-sm" onclick="addShape('polygon')" title="Polygon">â¬¡</button>
          <button class="btn btn-primary btn-shape btn-sm" onclick="addShape('line')" title="Linie">â€”</button>
          <button class="btn btn-primary btn-shape btn-sm" onclick="addShape('arc')" title="Bogen">âŒ¢</button>
          <button class="btn btn-primary btn-shape btn-sm" onclick="addShape('matrix')" title="Matrix">âŠ</button>
          <button class="btn btn-primary btn-shape btn-sm" onclick="addShape('star')" title="Stern">â˜…</button>
          <button class="btn btn-success btn-shape btn-sm" onclick="toggleTextTool()" title="Text">ğŸ”¤</button>
          <button class="btn btn-warning btn-shape btn-sm" onclick="toggleFreehandDrawing()" id="freehandBtn" title="Freihand">âœï¸</button>
        </div>
      </div>

      <div class="toolbar-section" id="textSection" style="display: none;">
        <label for="textInput" class="form-label">Text</label>
        <input id="textInput" type="text" class="form-control form-control-sm" placeholder="Dein Text..." maxlength="50">
        <label for="letterSize" class="form-label mt-2">BuchstabengrÃ¶ÃŸe</label>
        <input id="letterSize" type="number" class="form-control form-control-sm" min="10" max="500" value="100">
        <label for="letterSpacing" class="form-label mt-2">Abstand</label>
        <input id="letterSpacing" type="number" class="form-control form-control-sm" min="0" max="100" value="20">
        <label for="letterPoints" class="form-label mt-2">Punkte pro Buchstabe</label>
        <input id="letterPoints" type="number" class="form-control form-control-sm" min="5" max="100" value="20">
        <button class="btn btn-success btn-sm w-100 mt-2" onclick="addTextToCanvas()" title="Text hinzufÃ¼gen">âœ“</button>
      </div>

      <div class="toolbar-section">
        <label for="pointCount" class="form-label">Punkte</label>
        <div style="display: flex; gap: 0.5rem; align-items: center;">
          <input id="pointCount" type="range" class="form-range" min="2" max="512" value="20" style="flex: 1;">
          <input id="pointCountNumber" type="number" class="form-control form-control-sm" min="2" max="512" value="20"
            style="width: 70px;">
        </div>
      </div>

      <div class="toolbar-section" id="matrixSection" style="display: none;">
        <label for="matrixRows" class="form-label">Matrix Reihen</label>
        <input id="matrixRows" type="number" class="form-control form-control-sm" min="1" max="128" value="4">
        <label for="matrixCols" class="form-label mt-2">Matrix Spalten</label>
        <input id="matrixCols" type="number" class="form-control form-control-sm" min="1" max="128" value="4">
        <label for="matrixPattern" class="form-label mt-2">Nummerierungsmuster</label>
        <select id="matrixPattern" class="form-select form-select-sm">
          <option value="zigzag-left">Zickzack (links start)</option>
          <option value="zigzag-right">Zickzack (rechts start)</option>
          <option value="zigzag-top">Zickzack (oben start)</option>
          <option value="zigzag-bottom">Zickzack (unten start)</option>
          <option value="raster">Raster (normal)</option>
        </select>
      </div>

      <div class="toolbar-section" id="starSection" style="display: none;">
        <label for="starSpikes" class="form-label">Stern Zacken</label>
        <input id="starSpikes" type="number" class="form-control form-control-sm" min="2" max="32" value="5">
      </div>

      <div class="toolbar-section" id="polygonSection" style="display: none;">
        <label for="polygonSides" class="form-label">Polygon Seiten</label>
        <input id="polygonSides" type="number" class="form-control form-control-sm" min="3" max="12" value="6">
      </div>

      <div class="toolbar-section" id="arcSection" style="display: none;">
        <label for="arcControls" class="form-label">Bogen Kontrollpunkte</label>
        <input id="arcControls" type="number" class="form-control form-control-sm" min="1" max="3" value="1">
      </div>

      <div class="toolbar-section">
        <div class="form-check form-switch mb-2">
          <input class="form-check-input" type="checkbox" id="showConnectionLines" checked>
          <label class="form-check-label" for="showConnectionLines">Verbindungslinien</label>
        </div>
      </div>

      <div class="toolbar-section">
        <button class="btn btn-info btn-sm" onclick="selectAllShapes()" title="Alle auswÃ¤hlen">â˜‘</button>
        <button class="btn btn-success btn-sm" onclick="groupSelectedShapes()" title="Gruppieren">ğŸ“¦</button>
        <button class="btn btn-secondary btn-sm" onclick="ungroupSelectedShapes()" title="Gruppe auflÃ¶sen">ğŸ“‚</button>
        <button class="btn btn-primary btn-sm" onclick="duplicateSelectedShape()" title="Duplizieren">ğŸ“‹</button>
        <button class="btn btn-warning btn-sm" onclick="resetSelectedShape()" title="ZurÃ¼cksetzen">â†º</button>
        <button class="btn btn-info btn-sm" onclick="fitToCanvas()" title="Fit to Canvas">â¤¢</button>
        <button class="btn btn-danger btn-sm" onclick="deleteSelectedShape()" title="LÃ¶schen">ğŸ—‘ï¸</button>

      </div>
    </div>

    <!-- Canvas (Mitte) -->
    <div class="canvas-wrapper" id="canvasWrapper">
      <div class="canvas-container" id="canvasContainer">
        <canvas id="canvas" width="1024" height="768"></canvas>
      </div>
      <!-- Zoom Controls -->
      <div id="zoomControls">
        <button class="btn btn-sm btn-outline-secondary zoom-btn" onclick="zoomIn()" title="VergrÃ¶ÃŸern">+</button>
        <div id="zoomLevel">100%</div>
        <button class="btn btn-sm btn-outline-secondary zoom-btn" onclick="zoomOut()" title="Verkleinern">âˆ’</button>
        <button class="btn btn-sm btn-outline-secondary zoom-btn zoom-reset" onclick="resetZoom()" title="ZurÃ¼cksetzen">1:1</button>
      </div>
    </div>

    <!-- Sidebar (rechts) -->
    <div class="sidebar">
      <h3>Objektliste</h3>
      <div id="objectList"></div>
    </div>
  </div>

  <!-- Project Manager Modal -->
  <div class="modal fade" id="projectManagerModal" tabindex="-1" aria-labelledby="projectManagerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="projectManagerModalLabel">ğŸ“‚ Projektverwaltung</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h6>Gespeicherte Projekte</h6>
            <button class="btn btn-primary btn-sm" onclick="refreshProjectList()" title="Aktualisieren">ğŸ”„</button>
          </div>
          <div id="projectListContainer">
            <div class="text-center py-4">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">LÃ¤dt...</span>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">SchlieÃŸen</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/stroke-font.js"></script>
  <script src="editor.js"></script>
</body>

</html>